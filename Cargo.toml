[package]
name = "consola"
version = "0.0.0-alpha.0"
edition = "2024"
rust-version = "1.85"
description = "üê® Elegant Console Logger for Rust and Browser"
readme = "README.md"
repository = "https://github.com/MuntasirSZN/consola-rs"
license = "MIT"
keywords = ["ansi", "console", "logging", "wasm"]
categories = ["development-tools"]

[package.metadata.cargo-nextest.profile.default]
fail-fast = false
retries = 1
junit = { path = "junit.xml" }

[lib]
crate-type = ["cdylib", "rlib"]

[[bench]]
harness = false
name = "logging"

[dependencies]
anstream = { version = "0.6.21", optional = true }
anstyle = { version = "1.0.13", optional = true }
anyhow = "1.0.100"
blake3 = "1.8.2"
demand = { version = "1.8.1", optional = true }
jiff = "0.2.17"
js-sys = { version = "0.3.82", optional = true }
libc = "0.2"
log = { version = "0.4.29", optional = true }
once_cell = "1.21.3"
parking_lot = "0.12.5"
serde = { version = "1.0.228", features = ["derive"], optional = true }
serde_json = { version = "1.0.148", optional = true }
smallvec = { version = "1.15.1", features = ["const_new", "union"] }
strip-ansi-escapes = "0.2.1"
thiserror = "2.0.17"
tracing = { version = "0.1.44", optional = true }
tracing-subscriber = { version = "0.3.22", features = [
  "fmt",
  "registry",
], optional = true }
unicode-width = { version = "0.2.2", optional = true }
wasm-bindgen = { version = "0.2.105", optional = true }
web-sys = { version = "0.3.82", optional = true }

[dev-dependencies]
insta = { version = "1.45.1", features = ["yaml"] }
rstest = "0.26.1"
wasm-bindgen-test = { version = "0.3.55" }

[target.'cfg(not(target_arch = "wasm32"))'.dev-dependencies]
assert_fs = "1.1.3"
divan = { package = "codspeed-divan-compat", version = "4.1.0" }
proptest = "1.9.0"

[target.'cfg(target_arch = "wasm32")'.dev-dependencies]
getrandom = { version = "0.3", default-features = false, features = ["wasm_js"] }
uuid = { version = "1.19.0", features = ["js"] }

[features]
default = ["color", "fancy"]
async-reporters = []  # placeholder (post-MVP)
bridge-log = ["dep:log"]
bridge-tracing = ["dep:tracing", "dep:tracing-subscriber"]
color = ["anstream", "anstyle"]
fancy = ["unicode-width"]
json = ["dep:serde", "dep:serde_json"]
prompt-demand = ["dep:demand"]
wasm = ["dep:js-sys", "dep:wasm-bindgen", "dep:web-sys"]

[profile.bench]
lto = true
codegen-units = 1

[profile.release]
lto = true
codegen-units = 1
